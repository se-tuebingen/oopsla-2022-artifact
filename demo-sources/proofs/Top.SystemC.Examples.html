---
layout: coqdoc
parent: Proofs
---
<h1 class="libtitle">Top.SystemC.Examples</h1>

<div class="code">
</div>

<div class="doc">

<div class="source">
  The source of this file can be found on
  <a href="{{site.github}}/blob/main/coq/SystemC/Examples.v">Github</a>.
</div>
 
</div>
<div class="code">

<br/>

<br/>
</div>

<div class="doc">
This file contains some worked examples in Coq for System C. 
<div class="paragraph"> </div>

 As System C is concerned with tracking <i>effectful</i> computation,
    represented by a block type, we define a base block type <span class="inlinecode"><a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a></span>
    that is used to represent some ambient, global effectful operation
 perhaps for performing I/O.

<div class="paragraph"> </div>

    In System C, we could define <span class="inlinecode"><a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a></span> using the following:

<div class="paragraph"> </div>


<pre><code class="language-effekt">
interface S0 {
  def doSomething(): Int
}
</code></pre>


<div class="paragraph"> </div>


</div>
<div class="code">
<span class="id" title="keyword">Parameter</span> <a name="S0"><span class="id" title="axiom">S0</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#btyp"><span class="id" title="inductive">btyp</span></a>.<br/>
<span class="id" title="keyword">Parameter</span> <a name="S0Wf"><span class="id" title="axiom">S0Wf</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#wf_btyp"><span class="id" title="inductive">wf_btyp</span></a> <a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a>.<br/>
<span class="id" title="keyword">Parameter</span> <a name="S0Type"><span class="id" title="axiom">S0Type</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#btype"><span class="id" title="inductive">btype</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Here is an example of a function which takes a block argument f of type <span class="inlinecode"><a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a></span> and boxes it.
    In System C, we could define this using the following:

<pre><code class="language-effekt">
def id {f : S0} {
  box f
}
</code></pre>
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="id_ex"><span class="id" title="definition">id_ex</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#blk"><span class="id" title="inductive">blk</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#blk_babs"><span class="id" title="constructor">blk_babs</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_box"><span class="id" title="constructor">exp_box</span></a> (<a class="idref" href="Top.SystemC.CaptureSets.html#cset_bvar"><span class="id" title="definition">cset_bvar</span></a> 0) (<a class="idref" href="Top.SystemC.Definitions.html#blk_bvar"><span class="id" title="constructor">blk_bvar</span></a> 0))).<br/>

<br/>
</div>

<div class="doc">
Naturally, it would have the type <tt>{f : S0} =&gt; S0 at {f}</tt>.
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="id_ex_typ"><span class="id" title="definition">id_ex_typ</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#btyp"><span class="id" title="inductive">btyp</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_bfun"><span class="id" title="constructor">typ_bfun</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#typ_capt"><span class="id" title="constructor">typ_capt</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a> (<a class="idref" href="Top.SystemC.CaptureSets.html#cset_bvar"><span class="id" title="definition">cset_bvar</span></a> 0)).<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="id_ex_typing"><span class="id" title="lemma">id_ex_typing</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">blk</span></a> <a class="idref" href="Top.SystemC.Examples.html#id_ex"><span class="id" title="definition">id_ex</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#id_ex_typ"><span class="id" title="definition">id_ex_typ</span></a>.<br/>

<br/>
</div>

<div class="doc">
Next, we model a simple try-catch expression which simply returns a value.
    This, written in our language, looks like:

<pre><code class="language-effekt">
def example1() {
  try {
    0
  } with cap : S0 {
    def doSomething() {
      0
    }
  }
}
</code></pre>

    As our formalism in Coq lacks integers (and other expression values), we model
    our expressions and expression values in Coq using a base expression type <span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a></span>
    and a singular inhabitant of that type, namely <span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a></span>.

<div class="paragraph"> </div>


</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="try_return_immediate_typ"><span class="id" title="definition">try_return_immediate_typ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="try_return_param_type"><span class="id" title="definition">try_return_param_type</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="try_return_immediate"><span class="id" title="definition">try_return_immediate</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#stm_try"><span class="id" title="constructor">stm_try</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_param_type"><span class="id" title="definition">try_return_param_type</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate_typ"><span class="id" title="definition">try_return_immediate_typ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>).<br/>

<br/>
</div>

<div class="doc">
As expected, that try statement returns an <tt>Int</tt> (in our formalism, a <span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a></span>). 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="try_return_immediate_typing"><span class="id" title="lemma">try_return_immediate_typing</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">stm</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate"><span class="id" title="definition">try_return_immediate</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate_typ"><span class="id" title="definition">try_return_immediate_typ</span></a>.<br/>

<br/>
</div>

<div class="doc">
And naturally, reduces to 0/<span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a></span> as the effect is never invoked.
    As an aside, we assume the existance of three unique, fresh labels. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Parameter</span> <a name="l1"><span class="id" title="axiom">l1</span></a> <a name="l2"><span class="id" title="axiom">l2</span></a> <a name="l3"><span class="id" title="axiom">l3</span></a> : <a class="idref" href="Top.Util.Label.html#LabelImpl.label"><span class="id" title="axiom">label</span></a>.<br/>
<span class="id" title="keyword">Axiom</span> <a name="l1l2"><span class="id" title="axiom">l1l2</span></a> : <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">≠</span></a> <a class="idref" href="Top.SystemC.Examples.html#l2"><span class="id" title="axiom">l2</span></a>.<br/>
<span class="id" title="keyword">Axiom</span> <a name="l1l3"><span class="id" title="axiom">l1l3</span></a> : <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">≠</span></a> <a class="idref" href="Top.SystemC.Examples.html#l3"><span class="id" title="axiom">l3</span></a>.<br/>
<span class="id" title="keyword">Axiom</span> <a name="l2l3"><span class="id" title="axiom">l2l3</span></a> : <a class="idref" href="Top.SystemC.Examples.html#l2"><span class="id" title="axiom">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">≠</span></a> <a class="idref" href="Top.SystemC.Examples.html#l3"><span class="id" title="axiom">l3</span></a>.<br/>

<br/>
</div>

<div class="doc">
Now, the try expression then reduces to returning a value directly out of a handler frame. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="try_return_immediate_s1"><span class="id" title="lemma">try_return_immediate_s1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate"><span class="id" title="definition">try_return_immediate</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_param_type"><span class="id" title="definition">try_return_param_type</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate_typ"><span class="id" title="definition">try_return_immediate_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/>
</div>

<div class="doc">
...which, by our reduction rules, eliminates the handler frame from the top of the stack. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="try_return_immediate_s2"><span class="id" title="lemma">try_return_immediate_s2</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">Q</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Similarly, next we model a try statement which actually throws something.  In System C, this can be
  expressed using the following fragment:

<pre><code class="language-effekt">
def example2() {
  try {
    cap.doSomething()
  } with cap : S0 {
    def doSomething() {
      0
    }
  }
}
</code></pre>


</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="try_return_throw"><span class="id" title="definition">try_return_throw</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#stm_try"><span class="id" title="constructor">stm_try</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_bvar"><span class="id" title="constructor">blk_bvar</span></a> 0) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>).<br/>

<br/>
</div>

<div class="doc">
Naturally, it still returns an Int/<span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a></span> though. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="try_return_throw_typing"><span class="id" title="lemma">try_return_throw_typing</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">stm</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw"><span class="id" title="definition">try_return_throw</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a>.<br/>

<br/>
</div>

<div class="doc">
The reduction steps for this expression are a bit more complicated.  First, a throw
    statement is reduced in the presence of a matching handler, which shifts evaluation
    to that handler and unwinds from there. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="try_return_throw_s1"><span class="id" title="lemma">try_return_throw_s1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw"><span class="id" title="definition">try_return_throw</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="try_return_throw_s2"><span class="id" title="lemma">try_return_throw_s2</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">Q</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="try_return_throw_s3"><span class="id" title="lemma">try_return_throw_s3</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a> .<br/>

<br/>
</div>

<div class="doc">
This example is a little more complicated.  Here, we throw while evaluating a value-binder
    under the handler block.

<pre><code class="language-effekt">
def example3() {
  try {
    val x = cap.doSomething()
    0
  } with cap : S0 {
    def doSomething() {
      0
    }
  }
}
</code></pre>
    

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> := <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a> := <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="try_apply_throw"><span class="id" title="definition">try_apply_throw</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#stm_try"><span class="id" title="constructor">stm_try</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_val"><span class="id" title="constructor">stm_val</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_bvar"><span class="id" title="constructor">blk_bvar</span></a> 0) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)).<br/>

<br/>
</div>

<div class="doc">
Naturally, it returns an Int/<span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a></span> again. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_typing"><span class="id" title="lemma">try_apply_throw_typing</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">stm</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw"><span class="id" title="definition">try_apply_throw</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s1"><span class="id" title="lemma">try_apply_throw_s1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw"><span class="id" title="definition">try_apply_throw</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_val"><span class="id" title="constructor">stm_val</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s2"><span class="id" title="lemma">try_apply_throw_s2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_val"><span class="id" title="constructor">stm_val</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">((</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s3"><span class="id" title="lemma">try_apply_throw_s3</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">((</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">((</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s4"><span class="id" title="lemma">try_apply_throw_s4</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">((</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s5"><span class="id" title="lemma">try_apply_throw_s5</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/>

<br/>
<span class="comment">(*<br/>
Lemma&nbsp;cset_references_bvar_evidently&nbsp;:&nbsp;forall&nbsp;A&nbsp;(t&nbsp;s&nbsp;:&nbsp;A)&nbsp;i,<br/>
&nbsp;&nbsp;(if&nbsp;cset_references_bvar_dec&nbsp;i&nbsp;(cset_bvar&nbsp;i)&nbsp;then&nbsp;t&nbsp;else&nbsp;s)&nbsp;=&nbsp;t.<br/>
Proof.<br/>
&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;cbv.<br/>
&nbsp;&nbsp;destruct_if;&nbsp;<span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> <span class="inlinecode">|</span>.<br/>
&nbsp;&nbsp;rewrite_set_facts_in&nbsp;Heqb.<br/>
&nbsp;&nbsp;fnsetdec.<br/>
Qed.<br/>
Lemma&nbsp;cset_references_bvar_evidently_empty&nbsp;:&nbsp;forall&nbsp;A&nbsp;(t&nbsp;s&nbsp;:&nbsp;A)&nbsp;i,<br/>
&nbsp;&nbsp;(if&nbsp;cset_references_bvar_dec&nbsp;i&nbsp;{}C&nbsp;then&nbsp;t&nbsp;else&nbsp;s)&nbsp;=&nbsp;s.<br/>
Proof.<br/>
&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;cbv.<br/>
&nbsp;&nbsp;destruct_if;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">reflexivity</span></span>.<br/>
&nbsp;&nbsp;rewrite_set_facts_in&nbsp;Heqb.<br/>
&nbsp;&nbsp;fnsetdec.<br/>
Qed.<br/>
Lemma&nbsp;cset_references_bvar_evidently_not&nbsp;:&nbsp;forall&nbsp;A&nbsp;(t&nbsp;s&nbsp;:&nbsp;A)&nbsp;i&nbsp;j,<br/>
&nbsp;&nbsp;i&nbsp;&lt;&gt;&nbsp;j&nbsp;-&gt;<br/>
&nbsp;&nbsp;(if&nbsp;cset_references_bvar_dec&nbsp;i&nbsp;(cset_bvar&nbsp;j)&nbsp;then&nbsp;t&nbsp;else&nbsp;s)&nbsp;=&nbsp;s.<br/>
Proof.<br/>
&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;cbv.<br/>
&nbsp;&nbsp;destruct_if;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">reflexivity</span></span>.<br/>
&nbsp;&nbsp;rewrite_set_facts_in&nbsp;Heqb.<br/>
&nbsp;&nbsp;fnsetdec.<br/>
Qed.<br/>
Lemma&nbsp;cset_references_bvar_evidently_fvar&nbsp;:&nbsp;forall&nbsp;A&nbsp;(t&nbsp;s&nbsp;:&nbsp;A)&nbsp;i&nbsp;x,<br/>
&nbsp;&nbsp;(if&nbsp;cset_references_bvar_dec&nbsp;i&nbsp;(cset_fvar&nbsp;x)&nbsp;then&nbsp;t&nbsp;else&nbsp;s)&nbsp;=&nbsp;s.<br/>
Proof.<br/>
&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;cbv.<br/>
&nbsp;&nbsp;destruct_if;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">reflexivity</span></span>.<br/>
&nbsp;&nbsp;rewrite_set_facts_in&nbsp;Heqb.<br/>
&nbsp;&nbsp;fnsetdec.<br/>
Qed.<br/>
Lemma&nbsp;cset_references_bvar_evidently_lvar&nbsp;:&nbsp;forall&nbsp;A&nbsp;(t&nbsp;s&nbsp;:&nbsp;A)&nbsp;i&nbsp;l,<br/>
&nbsp;&nbsp;(if&nbsp;cset_references_bvar_dec&nbsp;i&nbsp;(cset_lvar&nbsp;l)&nbsp;then&nbsp;t&nbsp;else&nbsp;s)&nbsp;=&nbsp;s.<br/>
Proof.<br/>
&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;cbv.<br/>
&nbsp;&nbsp;destruct_if;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">reflexivity</span></span>.<br/>
&nbsp;&nbsp;rewrite_set_facts_in&nbsp;Heqb.<br/>
&nbsp;&nbsp;fnsetdec.<br/>
Qed.<br/>
Lemma&nbsp;cset_remove_bvar_evidently&nbsp;:&nbsp;forall&nbsp;i,&nbsp;cset_remove_bvar&nbsp;i&nbsp;(cset_bvar&nbsp;i)&nbsp;=&nbsp;{}C.<br/>
Proof.&nbsp;intro.&nbsp;cbv.&nbsp;f_equal.&nbsp;csetdec.&nbsp;Qed.<br/>
<br/>
Lemma&nbsp;cset_union_empty&nbsp;:&nbsp;forall&nbsp;C,&nbsp;cset_union&nbsp;C&nbsp;{}C&nbsp;=&nbsp;C.<br/>
Proof.&nbsp;intro.&nbsp;cbv.&nbsp;destruct&nbsp;C.&nbsp;csetdec.&nbsp;Qed.<br/>
<br/>
Hint&nbsp;Rewrite&nbsp;cset_references_bvar_evidently&nbsp;:&nbsp;csets.<br/>
Hint&nbsp;Rewrite&nbsp;cset_references_bvar_evidently_empty&nbsp;:&nbsp;csets.<br/>
Hint&nbsp;Rewrite&nbsp;cset_references_bvar_evidently_fvar&nbsp;:&nbsp;csets.<br/>
Hint&nbsp;Rewrite&nbsp;cset_references_bvar_evidently_lvar&nbsp;:&nbsp;csets.<br/>
Hint&nbsp;Rewrite&nbsp;cset_references_bvar_evidently_not&nbsp;using&nbsp;congruence&nbsp;:&nbsp;csets.<br/>
<br/>
Hint&nbsp;Rewrite&nbsp;cset_remove_bvar_evidently&nbsp;:&nbsp;csets.<br/>
Hint&nbsp;Rewrite&nbsp;cset_union_empty&nbsp;:&nbsp;csets.<br/>
<br/>
Ltac&nbsp;cleanup&nbsp;:=<br/>
&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_cvt_rec</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">open_cvt_rec</span></span> <span class="inlinecode"><span class="id" title="var">open_cbt_rec</span></span>;&nbsp;csetsimpl.<br/>
<br/>
Definition&nbsp;cap_return_tm&nbsp;:=<br/>
&nbsp;&nbsp;(stm_try&nbsp;{}C&nbsp;typ_base&nbsp;typ_base<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_val&nbsp;(typ_capt&nbsp;(typ_vfun&nbsp;typ_base&nbsp;typ_base)&nbsp;(cset_bvar&nbsp;0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_try&nbsp;(cset_bvar&nbsp;0)&nbsp;typ_base&nbsp;typ_base<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_def&nbsp;(cset_bvar&nbsp;1)&nbsp;(typ_vfun&nbsp;typ_base&nbsp;typ_base)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(blk_vabs&nbsp;typ_base&nbsp;(stm_throw&nbsp;(blk_bvar&nbsp;1)&nbsp;exp_const))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_ret&nbsp;(exp_box&nbsp;(cset_bvar&nbsp;2)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(blk_bvar&nbsp;0))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_ret&nbsp;(exp_box&nbsp;(cset_bvar&nbsp;1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(blk_vabs&nbsp;typ_base&nbsp;(stm_ret&nbsp;exp_const)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_vapp&nbsp;(blk_unbox&nbsp;(exp_bvar&nbsp;0))&nbsp;exp_const))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_ret&nbsp;exp_const))<br/>
.<br/>
<br/>
Ltac&nbsp;sig_binds_dec&nbsp;:=<br/>
&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">Signatures.binds</span></span> <span class="inlinecode"><span class="id" title="var">Signatures.get</span></span>;&nbsp;simpl;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;first&nbsp;<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">destruct_if</span>;</span> <span class="inlinecode"><span class="id" title="tactic">try</span></span> <span class="inlinecode"><span class="id" title="tactic">congruence</span></span>.<br/>
<br/>
Lemma&nbsp;cap_return_typing1&nbsp;:<br/>
&nbsp;&nbsp;(nil&nbsp;@&nbsp;(cset_lvar&nbsp;l1)&nbsp;;&nbsp;(l2,&nbsp;bind_sig&nbsp;typ_base&nbsp;typ_base)&nbsp;::&nbsp;(l1,&nbsp;bind_sig&nbsp;typ_base&nbsp;typ_base)&nbsp;::&nbsp;nil<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-blk&nbsp;(blk_vabs&nbsp;typ_base&nbsp;(stm_throw&nbsp;(blk_handler&nbsp;l1)&nbsp;exp_const))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~:&nbsp;(typ_vfun&nbsp;typ_base&nbsp;typ_base)).<br/>
Proof&nbsp;with&nbsp;crush.<br/>
&nbsp;&nbsp;Require&nbsp;Import&nbsp;SystemC.Soundness.<br/>
&nbsp;&nbsp;pick&nbsp;fresh&nbsp;x&nbsp;and&nbsp;apply&nbsp;typing_vabs.<br/>
&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span>.<br/>
&nbsp;&nbsp;pose&nbsp;proof&nbsp;(l1l2).<br/>
&nbsp;&nbsp;econstructor;&nbsp;try&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;typ_base);&nbsp;repeat&nbsp;(constructor;&nbsp;try&nbsp;fsetdec;&nbsp;try&nbsp;lsetdec)...<br/>
&nbsp;&nbsp;sig_binds_dec.<br/>
Qed.<br/>
<br/>
Lemma&nbsp;cap_return_typing2&nbsp;:&nbsp;forall&nbsp;x,<br/>
&nbsp;&nbsp;(styping<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((x,&nbsp;bind_blk&nbsp;(typ_vfun&nbsp;typ_base&nbsp;typ_base)&nbsp;(capture&nbsp;(cset_lvar&nbsp;l1)))&nbsp;::&nbsp;nil)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cset_lvar&nbsp;l1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((l2,&nbsp;bind_sig&nbsp;typ_base&nbsp;typ_base)&nbsp;::&nbsp;(l1,&nbsp;bind_sig&nbsp;typ_base&nbsp;typ_base)&nbsp;::&nbsp;nil)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_ret&nbsp;(exp_box&nbsp;(cset_lvar&nbsp;l1)&nbsp;(blk_fvar&nbsp;x)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(typ_capt&nbsp;(typ_vfun&nbsp;typ_base&nbsp;typ_base)&nbsp;(cset_lvar&nbsp;l1))).<br/>
Proof&nbsp;with&nbsp;crush.<br/>
&nbsp;&nbsp;intro&nbsp;x.<br/>
&nbsp;&nbsp;assert&nbsp;(wf_sig&nbsp;nil)&nbsp;by&nbsp;constructor.<br/>
&nbsp;&nbsp;assert<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(wf_cap&nbsp;<span class="inlinecode">(<span class="id" title="var">x</span>,</span> <span class="inlinecode"><span class="id" title="var">bind_blk</span></span> <span class="inlinecode">(<span class="id" title="var">typ_vfun</span></span> <span class="inlinecode"><span class="id" title="var">typ_base</span></span> <span class="inlinecode"><span class="id" title="var">typ_base</span>)</span> <span class="inlinecode">(<span class="id" title="var">capture</span></span> <span class="inlinecode">(<span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">l1</span>)))</span>&nbsp;(cset_lvar&nbsp;l1)).&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;constructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;?&nbsp;?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;fsetdec.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;rapply&nbsp;typing_ret...<br/>
&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;eapply&nbsp;typing_bvar_capture...<br/>
&nbsp;&nbsp;-&nbsp;constructor...<br/>
&nbsp;&nbsp;-&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;(pose&nbsp;proof&nbsp;l1l2);&nbsp;lsetdec.<br/>
Qed.<br/>
<br/>
Set&nbsp;Nested&nbsp;Proofs&nbsp;Allowed.<br/>
<br/>
Lemma&nbsp;wf_cap_union&nbsp;:&nbsp;forall&nbsp;E&nbsp;C&nbsp;D,<br/>
&nbsp;&nbsp;wf_cap&nbsp;E&nbsp;C&nbsp;-&gt;<br/>
&nbsp;&nbsp;wf_cap&nbsp;E&nbsp;D&nbsp;-&gt;<br/>
&nbsp;&nbsp;wf_cap&nbsp;E&nbsp;(cset_union&nbsp;C&nbsp;D).<br/>
Proof.<br/>
&nbsp;&nbsp;intros&nbsp;*&nbsp;WfC&nbsp;WfD.<br/>
&nbsp;&nbsp;destruct&nbsp;C;&nbsp;destruct&nbsp;D.<br/>
&nbsp;&nbsp;cbv.<br/>
&nbsp;&nbsp;inversion&nbsp;WfC;&nbsp;inversion&nbsp;WfD;&nbsp;subst.<br/>
&nbsp;&nbsp;csetsimpl.<br/>
&nbsp;&nbsp;constructor.<br/>
&nbsp;&nbsp;intros&nbsp;?&nbsp;?.<br/>
&nbsp;&nbsp;rewrite&nbsp;AtomSetFacts.union_iff&nbsp;in&nbsp;H.<br/>
&nbsp;&nbsp;eauto*.<br/>
Qed.<br/>
<br/>
Ltac&nbsp;cleanup&nbsp;::=<br/>
&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"></span>
      <span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span> <span class="inlinecode"><span class="id" title="var">open_bs</span></span> <span class="inlinecode"><span class="id" title="var">open_bs_rec</span></span>
      <span class="inlinecode"><span class="id" title="var">open_cvt</span></span> <span class="inlinecode"><span class="id" title="var">open_cvt_rec</span></span> <span class="inlinecode"><span class="id" title="var">open_cbt</span></span> <span class="inlinecode"><span class="id" title="var">open_cbt_rec</span></span> <span class="inlinecode"><span class="id" title="var">open_cs</span></span> <span class="inlinecode"><span class="id" title="var">open_cs_rec</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span>;&nbsp;csetsimpl.<br/>
<br/>
Ltac&nbsp;solve_wf_cap_cset_fvar&nbsp;:=<br/>
&nbsp;&nbsp;constructor;<br/>
&nbsp;&nbsp;intros&nbsp;?&nbsp;?;<br/>
&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;|&nbsp;H&nbsp;:&nbsp;?x&nbsp;`in`&nbsp;singleton&nbsp;?y&nbsp;|-&nbsp;_&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(x&nbsp;=&nbsp;y)&nbsp;by&nbsp;fsetdec;&nbsp;subst<br/>
&nbsp;&nbsp;end;<br/>
&nbsp;&nbsp;eexists;&nbsp;binds_dec.<br/>
<br/>
Lemma&nbsp;cap_return_typing0&nbsp;:&nbsp;exists&nbsp;T,<br/>
&nbsp;&nbsp;(styping&nbsp;nil&nbsp;{}C&nbsp;nil<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cap_return_tm<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T).<br/>
Proof&nbsp;with&nbsp;crush.<br/>
&nbsp;&nbsp;eexists.<br/>
&nbsp;&nbsp;unfold&nbsp;cap_return_tm.<br/>
&nbsp;&nbsp;pose&nbsp;proof&nbsp;wf_cap_empty.<br/>
&nbsp;&nbsp;Lemma&nbsp;wf_sig_nil&nbsp;:&nbsp;wf_sig&nbsp;nil.&nbsp;constructor.&nbsp;Qed.<br/>
&nbsp;&nbsp;pose&nbsp;proof&nbsp;wf_sig_nil.<br/>
&nbsp;&nbsp;pick&nbsp;fresh&nbsp;x&nbsp;and&nbsp;apply&nbsp;typing_try...&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;cleanup.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;pick&nbsp;fresh&nbsp;y&nbsp;and&nbsp;apply&nbsp;typing_val...&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pick&nbsp;fresh&nbsp;z&nbsp;and&nbsp;apply&nbsp;typing_try.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleanup.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pick&nbsp;fresh&nbsp;xx&nbsp;and&nbsp;apply&nbsp;typing_def.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(z&nbsp;&lt;&gt;&nbsp;x)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pick&nbsp;fresh&nbsp;yx&nbsp;and&nbsp;apply&nbsp;typing_vabs;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(yx&nbsp;&lt;&gt;&nbsp;z)&nbsp;by&nbsp;fsetdec;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(yx&nbsp;&lt;&gt;&nbsp;x)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleanup.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;typing_throw;&nbsp;try&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;typ_base)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;typing_bvar_tracked.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;binds_dec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;(constructor;&nbsp;simpl_env;&nbsp;try&nbsp;fsetdec).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleanup.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(z&nbsp;&lt;&gt;&nbsp;x)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(xx&nbsp;&lt;&gt;&nbsp;z)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(xx&nbsp;&lt;&gt;&nbsp;x)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;typing_bvar_capture.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5:&nbsp;binds_dec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4:&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;apply&nbsp;wf_cap_union;&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleanup.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;solve_wf_cap_cset_fvar...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;solve_wf_cap_cset_fvar...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pick&nbsp;fresh&nbsp;zx&nbsp;and&nbsp;apply&nbsp;typing_vabs.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleanup.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(z&nbsp;&lt;&gt;&nbsp;x)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(zx&nbsp;&lt;&gt;&nbsp;z)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(zx&nbsp;&lt;&gt;&nbsp;x)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;solve_wf_cap_cset_fvar...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3:&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;cleanup.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;typing_vapp...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(y&nbsp;&lt;&gt;&nbsp;x)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;typing_evar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3:&nbsp;binds_dec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(y&nbsp;&lt;&gt;&nbsp;x)&nbsp;by&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;solve_wf_cap_cset_fvar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;constructor...<br/>
&nbsp;&nbsp;constructor...<br/>
Qed.<br/>
<br/>
<span class="comment">(*&nbsp;def&nbsp;C&nbsp;x:&nbsp;S&nbsp;=&nbsp;b;&nbsp;s&nbsp;&nbsp;&nbsp;.=&nbsp;&nbsp;&nbsp;((x&nbsp;:&nbsp;C&nbsp;S)&nbsp;=&gt;&nbsp;s)(box&nbsp;C&nbsp;b)&nbsp;*)</span><br/>
Definition&nbsp;sugar_def&nbsp;(C&nbsp;:&nbsp;cap)&nbsp;(S1&nbsp;:&nbsp;btyp)&nbsp;(b&nbsp;:&nbsp;blk)&nbsp;(s&nbsp;:&nbsp;stm)&nbsp;:&nbsp;stm&nbsp;:=<br/>
&nbsp;&nbsp;(stm_vapp&nbsp;(blk_vabs&nbsp;(typ_capt&nbsp;S1&nbsp;C)&nbsp;s)&nbsp;(exp_box&nbsp;C&nbsp;b)).<br/>
<br/>
Definition&nbsp;sugar_var&nbsp;(x&nbsp;:&nbsp;atom)&nbsp;:&nbsp;blk&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(blk_unbox&nbsp;(exp_fvar&nbsp;x)).<br/>
<br/>
Lemma&nbsp;sugar_def_typing&nbsp;:&nbsp;forall&nbsp;L&nbsp;E&nbsp;R&nbsp;b&nbsp;s&nbsp;(C&nbsp;:&nbsp;cap)&nbsp;Q&nbsp;S1&nbsp;T2,<br/>
&nbsp;&nbsp;R&nbsp;|=&nbsp;C&nbsp;-&gt;<br/>
&nbsp;&nbsp;wf_cap&nbsp;E&nbsp;C&nbsp;-&gt;<br/>
&nbsp;&nbsp;wf_cap&nbsp;E&nbsp;R&nbsp;-&gt;<br/>
&nbsp;&nbsp;E&nbsp;@&nbsp;C&nbsp;;&nbsp;Q&nbsp;|-blk&nbsp;b&nbsp;~:&nbsp;S1&nbsp;-&gt;<br/>
&nbsp;&nbsp;(forall&nbsp;x&nbsp;:&nbsp;atom,&nbsp;x&nbsp;`notin`&nbsp;L&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="inlinecode">(<span class="id" title="var">x</span>,</span> <span class="inlinecode"><span class="id" title="var">bind_val</span></span> <span class="inlinecode">(<span class="id" title="var">typ_capt</span></span> <span class="inlinecode"><span class="id" title="var">S1</span></span> <span class="inlinecode"><span class="id" title="var">C</span>))</span>&nbsp;++&nbsp;E)&nbsp;@&nbsp;R&nbsp;;&nbsp;Q&nbsp;|-stm&nbsp;(open_es&nbsp;s&nbsp;x)&nbsp;~:&nbsp;T2)&nbsp;-&gt;<br/>
&nbsp;&nbsp;E&nbsp;@&nbsp;R&nbsp;;&nbsp;Q&nbsp;|-stm&nbsp;(sugar_def&nbsp;C&nbsp;S1&nbsp;b&nbsp;s)&nbsp;~:&nbsp;T2.<br/>
Proof&nbsp;with&nbsp;crush.<br/>
&nbsp;&nbsp;intros.&nbsp;unfold&nbsp;sugar_def.<br/>
&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;econstructor...<br/>
Qed.<br/>
<br/>
Lemma&nbsp;sugar_var_typing&nbsp;:&nbsp;forall&nbsp;E&nbsp;R&nbsp;f&nbsp;S1&nbsp;C,<br/>
&nbsp;&nbsp;wf_env&nbsp;E&nbsp;-&gt;<br/>
&nbsp;&nbsp;wf_cap&nbsp;E&nbsp;R&nbsp;-&gt;<br/>
&nbsp;&nbsp;R&nbsp;|=&nbsp;C&nbsp;-&gt;<br/>
&nbsp;&nbsp;binds&nbsp;f&nbsp;(bind_val&nbsp;(typ_capt&nbsp;S1&nbsp;C))&nbsp;E&nbsp;-&gt;<br/>
&nbsp;&nbsp;E&nbsp;@&nbsp;R&nbsp;;&nbsp;nil&nbsp;|-blk&nbsp;(sugar_var&nbsp;f)&nbsp;~:&nbsp;S1.<br/>
Proof&nbsp;with&nbsp;crush.<br/>
&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;assert&nbsp;(wf_sig&nbsp;nil)&nbsp;by&nbsp;constructor.<br/>
&nbsp;&nbsp;econstructor...<br/>
Qed.<br/>
<br/>
<span class="comment">(**&nbsp;Finally<br/>
def&nbsp;handleTick(prog&nbsp;:&nbsp;{()&nbsp;=&gt;&nbsp;Int}&nbsp;=&gt;&nbsp;Int)&nbsp;=&gt;&nbsp;Int&nbsp;=<br/>
&nbsp;&nbsp;val&nbsp;stateFun&nbsp;=&nbsp;try&nbsp;{&nbsp;tick&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;res&nbsp;=&nbsp;prog&nbsp;(tick)&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;box&nbsp;{&nbsp;prog&nbsp;}&nbsp;(&nbsp;(s&nbsp;:&nbsp;Int)&nbsp;=&gt;&nbsp;res&nbsp;)<br/>
&nbsp;&nbsp;}&nbsp;with&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;box&nbsp;{&nbsp;prog&nbsp;}&nbsp;(&nbsp;(s&nbsp;:&nbsp;Int)&nbsp;=&gt;&nbsp;(unbox&nbsp;resume(s))(s&nbsp;+&nbsp;1)<br/>
&nbsp;&nbsp;}&nbsp;in<br/>
&nbsp;&nbsp;(unbox&nbsp;stateFun)(0)<br/>
*)</span><br/>
Definition&nbsp;handle_tick_term&nbsp;:=<br/>
&nbsp;&nbsp;blk_babs&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(stm_val&nbsp;<span class="comment">(*&nbsp;statefun&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(typ_capt&nbsp;(typ_vfun&nbsp;typ_base&nbsp;typ_base)&nbsp;(cset_bvar&nbsp;0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_try&nbsp;(cset_bvar&nbsp;0)&nbsp;typ_base&nbsp;typ_base<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(**&nbsp;body&nbsp;|&nbsp;tick&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_val&nbsp;typ_base&nbsp;(stm_bapp&nbsp;(blk_bvar&nbsp;1)&nbsp;(cset_bvar&nbsp;0)&nbsp;(blk_bvar&nbsp;0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_ret&nbsp;(exp_box&nbsp;(cset_bvar&nbsp;1)&nbsp;(blk_vabs&nbsp;typ_base&nbsp;(stm_ret&nbsp;(exp_bvar&nbsp;1))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_val<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(typ_capt&nbsp;(typ_vfun&nbsp;typ_base&nbsp;typ_base)&nbsp;(cset_bvar&nbsp;1))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_vapp&nbsp;(blk_bvar&nbsp;0)&nbsp;(exp_bvar&nbsp;0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_ret<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(exp_box&nbsp;(cset_bvar&nbsp;1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(blk_vabs&nbsp;typ_base&nbsp;(stm_vapp&nbsp;(blk_unbox&nbsp;(exp_bvar&nbsp;1))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(exp_bvar&nbsp;0)))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_vapp&nbsp;(blk_unbox&nbsp;(exp_bvar&nbsp;0))&nbsp;exp_const)).<br/>
Lemma&nbsp;handle_tick_term_typing&nbsp;:<br/>
&nbsp;&nbsp;exists&nbsp;T,&nbsp;empty&nbsp;@&nbsp;{}C&nbsp;;&nbsp;nil&nbsp;|-blk&nbsp;handle_tick_term&nbsp;~:&nbsp;T.<br/>
Proof&nbsp;with&nbsp;notin_simpl;&nbsp;crush;&nbsp;try&nbsp;fsetdec;&nbsp;try&nbsp;fnsetdec;&nbsp;try&nbsp;lsetdec.<br/>
&nbsp;&nbsp;eexists.<br/>
&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;instantiate&nbsp;(2&nbsp;:=&nbsp;{}).<br/>
&nbsp;&nbsp;intros&nbsp;prog&nbsp;progFresh.<br/>
&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_subset_prop</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;split;&nbsp;try&nbsp;fnsetdec;&nbsp;try&nbsp;lsetdec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span>
      <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_subset_prop</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;((NatSet.F.union&nbsp;{}N&nbsp;(NatSet.F.remove&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;({}N)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(x)&nbsp;with&nbsp;(prog).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;binds.&nbsp;simpl.&nbsp;destruct&nbsp;(prog&nbsp;==&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span>
      <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_subset_prop</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;((NatSet.F.union&nbsp;{}N&nbsp;(NatSet.F.remove&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;({}N)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intros&nbsp;tick.&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;prog).&nbsp;intros&nbsp;tickFr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;tick)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(open_cset&nbsp;1&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0)))&nbsp;with&nbsp;(cset_fvar&nbsp;tick).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cvt_rec&nbsp;0&nbsp;(cset_fvar&nbsp;tick)&nbsp;typ_base)&nbsp;with<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(open_cvt&nbsp;typ_base&nbsp;(cset_fvar&nbsp;tick)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;typing_bapp&nbsp;with&nbsp;(S1&nbsp;:=&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base))...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;econstructor.&nbsp;intros&nbsp;t&nbsp;tisTick.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;t&nbsp;with&nbsp;tick.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>
                 <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span>
                 <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.remove&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;({}N)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;progOrTick&nbsp;progOrTickCond.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;AtomSetFacts.union_iff&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;progOrTickCond...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;replace&nbsp;progOrTick&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;replace&nbsp;progOrTick&nbsp;with&nbsp;tick...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec;&nbsp;notin_solve.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.&nbsp;unfold&nbsp;cset_subset_prop;&nbsp;repeat&nbsp;split...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;intros&nbsp;t&nbsp;tIsTick.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;t&nbsp;with&nbsp;tick...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eexists.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span>
              <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span>
          <span class="inlinecode"></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;false...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry.&nbsp;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.not_mem_iff...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_cvt_rec</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;s.&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;tick&nbsp;`union`&nbsp;singleton&nbsp;prog).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;sFr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(1&nbsp;===&nbsp;1)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;tick)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(open_cset&nbsp;1&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;1)))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg.&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;s&nbsp;`union`&nbsp;singleton&nbsp;tick&nbsp;`union`&nbsp;singleton&nbsp;prog).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;unused&nbsp;unusedFr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg.&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>
      <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;1))&nbsp;with&nbsp;true...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(NatSet.F.union&nbsp;{}N&nbsp;(NatSet.F.remove&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;1))))&nbsp;with&nbsp;false...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry;&nbsp;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.not_mem_iff...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry;&nbsp;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cset_union&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;(cset_fvar&nbsp;tick))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;(cset_set&nbsp;(singleton&nbsp;tick&nbsp;`union`&nbsp;singleton&nbsp;prog)&nbsp;{}N&nbsp;{}L)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;progOrTick&nbsp;progOrTickCond.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;AtomSetFacts.union_iff&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;progOrTickCond...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;replace&nbsp;progOrTick&nbsp;with&nbsp;tick...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;replace&nbsp;progOrTick&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span>
           <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span>
           <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intros&nbsp;unused&nbsp;unusedFr&nbsp;resume&nbsp;resumeFr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_bs</span></span> <span class="inlinecode"><span class="id" title="var">open_bs_rec</span></span> <span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(0&nbsp;===&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;typing_bvar_capture...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;1&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;1))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;1))&nbsp;with&nbsp;true...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry.&nbsp;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff.&nbsp;fnsetdec.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;resume&nbsp;`union`&nbsp;singleton&nbsp;prog&nbsp;`union`&nbsp;singleton&nbsp;unused).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;s&nbsp;sFr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(1&nbsp;===&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;1&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;1))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;s&nbsp;`union`&nbsp;singleton&nbsp;resume&nbsp;`union`&nbsp;singleton&nbsp;prog&nbsp;`union`&nbsp;singleton&nbsp;unused).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;unboxResume&nbsp;unboxResumeFr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;(cset_fvar&nbsp;prog)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;cset_subset_prop;&nbsp;repeat&nbsp;split...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(0&nbsp;===&nbsp;0)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;1))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
            <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;&nbsp;&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
      <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;instantiate&nbsp;(2&nbsp;:=&nbsp;singleton&nbsp;prog).<br/>
&nbsp;&nbsp;intros&nbsp;stateFun&nbsp;stateFunFr.<br/>
&nbsp;&nbsp;econstructor.<br/>
&nbsp;&nbsp;destruct&nbsp;(0&nbsp;===&nbsp;0)...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;instantiate&nbsp;(2&nbsp;:=&nbsp;typ_base).<br/>
&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;typ_base).<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;replace&nbsp;&nbsp;&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog).<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
  <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/>
&nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;binds_dec.<br/>
&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/>
&nbsp;&nbsp;replace&nbsp;&nbsp;&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
  <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/>
&nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/>
&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;exists&nbsp;&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base)...<br/>
&nbsp;&nbsp;binds_dec...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;replace&nbsp;&nbsp;&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/>
&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span>
  <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/>
&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/>
&nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/>
&nbsp;&nbsp;econstructor...<br/>
&nbsp;&nbsp;Unshelve.<br/>
&nbsp;&nbsp;all:&nbsp;repeat&nbsp;exact&nbsp;{}.<br/>
Qed.<br/>
*)</span></div>
