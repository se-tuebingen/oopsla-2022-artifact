<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Examples - System C</title> <link rel="shortcut icon" href="/oopsla-2022-artifact/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/oopsla-2022-artifact/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/oopsla-2022-artifact/highlight/styles/github-gist.css"> <script type="text/javascript" src="/oopsla-2022-artifact/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Examples | System C</title> <meta name="generator" content="Jekyll v4.0.1" /> <meta property="og:title" content="Examples" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="This is the artifact acompanying the paper ‘Effects, Capabilities, and Boxes’." /> <meta property="og:description" content="This is the artifact acompanying the paper ‘Effects, Capabilities, and Boxes’." /> <meta property="og:site_name" content="System C" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Examples" /> <script type="application/ld+json"> {"headline":"Examples","description":"This is the artifact acompanying the paper ‘Effects, Capabilities, and Boxes’.","url":"/oopsla-2022-artifact/proofs/Top.SystemC.Examples.html","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/oopsla-2022-artifact/" class="site-title lh-tight"> System C </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/oopsla-2022-artifact/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/oopsla-2022-artifact/tutorial/" class="nav-list-link">Tutorial</a><ul class="nav-list "><li class="nav-list-item "><a href="/oopsla-2022-artifact/intro/" class="nav-list-link">Basics</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/capability/" class="nav-list-link">Capabilities</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/boxing/" class="nav-list-link">Boxing and Unboxing</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/oopsla-2022-artifact/proofs/" class="nav-list-link">Proofs</a><ul class="nav-list "><li class="nav-list-item "><a href="/oopsla-2022-artifact/proofs/Top.SystemC.CaptureSets.html" class="nav-list-link">CaptureSets</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/proofs/Top.SystemC.Definitions.html" class="nav-list-link">Definitions</a></li><li class="nav-list-item active"><a href="/oopsla-2022-artifact/proofs/Top.SystemC.Examples.html" class="nav-list-link active">Examples</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/proofs/Top.SystemC.Infrastructure.html" class="nav-list-link">Infrastructure</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/proofs/Top.SystemC.Lemmas.html" class="nav-list-link">Lemmas</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/proofs/Top.SystemC.Soundness.html" class="nav-list-link">Soundness</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/proofs/Top.SystemC.Substitution.html" class="nav-list-link">Substitution</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/oopsla-2022-artifact/paper.html" class="nav-list-link">Paper Examples</a><ul class="nav-list "><li class="nav-list-item "><a href="/oopsla-2022-artifact/paper/section1.html" class="nav-list-link">Section 1</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/paper/section2.html" class="nav-list-link">Section 2</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/paper/section4.html" class="nav-list-link">Section 4</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/oopsla-2022-artifact/casestudies.html" class="nav-list-link">Case Studies</a><ul class="nav-list "><li class="nav-list-item "><a href="/oopsla-2022-artifact/casestudies/passthrough.html" class="nav-list-link">Use and Mention</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/casestudies/regions.html" class="nav-list-link">Region-based Local State</a></li><li class="nav-list-item "><a href="/oopsla-2022-artifact/casestudies/scheduler.html" class="nav-list-link">Scheduling (with continuations and mutable cells)</a></li></ul></li></ul> </nav> <footer class="site-footer"> This artifact uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/oopsla-2022-artifact/proofs/">Proofs</a></li> <li class="breadcrumb-nav-list-item"><span>Examples</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <article id="coqdoc"> <h1 class="libtitle"> Top.SystemC.Examples </h1> <div class="code"> </div> <div class="doc"> <div class="source"> The source of this file can be found on <a href="https://github.com/se-tuebingen/oopsla-2022-artifact/blob/main/coq/SystemC/Examples.v">Github</a>. </div> </div> <div class="code"> <br/> <br/> </div> <div class="doc"> This file contains some worked examples in Coq for System C. <div class="paragraph"> </div> As System C is concerned with tracking <i>effectful</i> computation, represented by a block type, we define a base block type <span class="inlinecode"><a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a></span> that is used to represent some ambient, global effectful operation perhaps for performing I/O. <div class="paragraph"> </div> In System C, we could define <span class="inlinecode"><a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a></span> using the following: <div class="paragraph"> </div><pre><code class="language-effekt">
interface S0 {
  def doSomething(): Int
}
</code></pre><div class="paragraph"> </div> </div> <div class="code"> <span class="id" title="keyword">Parameter</span> <a name="S0"><span class="id" title="axiom">S0</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#btyp"><span class="id" title="inductive">btyp</span></a>.<br/> <span class="id" title="keyword">Parameter</span> <a name="S0Wf"><span class="id" title="axiom">S0Wf</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#wf_btyp"><span class="id" title="inductive">wf_btyp</span></a> <a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a>.<br/> <span class="id" title="keyword">Parameter</span> <a name="S0Type"><span class="id" title="axiom">S0Type</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#btype"><span class="id" title="inductive">btype</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a>.<br/> <br/> <br/> </div> <div class="doc"> Here is an example of a function which takes a block argument f of type <span class="inlinecode"><a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a></span> and boxes it. In System C, we could define this using the following:<pre><code class="language-effekt">
def id {f : S0} {
  box f
}
</code></pre></div> <div class="code"> <span class="id" title="keyword">Definition</span> <a name="id_ex"><span class="id" title="definition">id_ex</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#blk"><span class="id" title="inductive">blk</span></a> :=<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#blk_babs"><span class="id" title="constructor">blk_babs</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_box"><span class="id" title="constructor">exp_box</span></a> (<a class="idref" href="Top.SystemC.CaptureSets.html#cset_bvar"><span class="id" title="definition">cset_bvar</span></a> 0) (<a class="idref" href="Top.SystemC.Definitions.html#blk_bvar"><span class="id" title="constructor">blk_bvar</span></a> 0))).<br/> <br/> </div> <div class="doc"> Naturally, it would have the type <tt>{f : S0} =&gt; S0 at {f}</tt>. </div> <div class="code"> <span class="id" title="keyword">Definition</span> <a name="id_ex_typ"><span class="id" title="definition">id_ex_typ</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#btyp"><span class="id" title="inductive">btyp</span></a> :=<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_bfun"><span class="id" title="constructor">typ_bfun</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#typ_capt"><span class="id" title="constructor">typ_capt</span></a> <a class="idref" href="Top.SystemC.Examples.html#S0"><span class="id" title="axiom">S0</span></a> (<a class="idref" href="Top.SystemC.CaptureSets.html#cset_bvar"><span class="id" title="definition">cset_bvar</span></a> 0)).<br/> <br/> <br/> <span class="id" title="keyword">Lemma</span> <a name="id_ex_typing"><span class="id" title="lemma">id_ex_typing</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">blk</span></a> <a class="idref" href="Top.SystemC.Examples.html#id_ex"><span class="id" title="definition">id_ex</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#id_ex_typ"><span class="id" title="definition">id_ex_typ</span></a>.<br/> <br/> </div> <div class="doc"> Next, we model a simple try-catch expression which simply returns a value. This, written in our language, looks like:<pre><code class="language-effekt">
def example1() {
  try {
    0
  } with cap : S0 {
    def doSomething() {
      0
    }
  }
}
</code></pre>As our formalism in Coq lacks integers (and other expression values), we model our expressions and expression values in Coq using a base expression type <span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a></span> and a singular inhabitant of that type, namely <span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a></span>. <div class="paragraph"> </div> </div> <div class="code"> <span class="id" title="keyword">Definition</span> <a name="try_return_immediate_typ"><span class="id" title="definition">try_return_immediate_typ</span></a> :=<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/> <span class="id" title="keyword">Definition</span> <a name="try_return_param_type"><span class="id" title="definition">try_return_param_type</span></a> :=<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/> <span class="id" title="keyword">Definition</span> <a name="try_return_immediate"><span class="id" title="definition">try_return_immediate</span></a> :=<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#stm_try"><span class="id" title="constructor">stm_try</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_param_type"><span class="id" title="definition">try_return_param_type</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate_typ"><span class="id" title="definition">try_return_immediate_typ</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>).<br/> <br/> </div> <div class="doc"> As expected, that try statement returns an <tt>Int</tt> (in our formalism, a <span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a></span>). </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_return_immediate_typing"><span class="id" title="lemma">try_return_immediate_typing</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">stm</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate"><span class="id" title="definition">try_return_immediate</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate_typ"><span class="id" title="definition">try_return_immediate_typ</span></a>.<br/> <br/> </div> <div class="doc"> And naturally, reduces to 0/<span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a></span> as the effect is never invoked. As an aside, we assume the existance of three unique, fresh labels. </div> <div class="code"> <br/> <span class="id" title="keyword">Parameter</span> <a name="l1"><span class="id" title="axiom">l1</span></a> <a name="l2"><span class="id" title="axiom">l2</span></a> <a name="l3"><span class="id" title="axiom">l3</span></a> : <a class="idref" href="Top.Util.Label.html#LabelImpl.label"><span class="id" title="axiom">label</span></a>.<br/> <span class="id" title="keyword">Axiom</span> <a name="l1l2"><span class="id" title="axiom">l1l2</span></a> : <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">≠</span></a> <a class="idref" href="Top.SystemC.Examples.html#l2"><span class="id" title="axiom">l2</span></a>.<br/> <span class="id" title="keyword">Axiom</span> <a name="l1l3"><span class="id" title="axiom">l1l3</span></a> : <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">≠</span></a> <a class="idref" href="Top.SystemC.Examples.html#l3"><span class="id" title="axiom">l3</span></a>.<br/> <span class="id" title="keyword">Axiom</span> <a name="l2l3"><span class="id" title="axiom">l2l3</span></a> : <a class="idref" href="Top.SystemC.Examples.html#l2"><span class="id" title="axiom">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">≠</span></a> <a class="idref" href="Top.SystemC.Examples.html#l3"><span class="id" title="axiom">l3</span></a>.<br/> <br/> </div> <div class="doc"> Now, the try expression then reduces to returning a value directly out of a handler frame. </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_return_immediate_s1"><span class="id" title="lemma">try_return_immediate_s1</span></a> :<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate"><span class="id" title="definition">try_return_immediate</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_param_type"><span class="id" title="definition">try_return_param_type</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_immediate_typ"><span class="id" title="definition">try_return_immediate_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/> </div> <div class="doc"> ...which, by our reduction rules, eliminates the handler frame from the top of the stack. </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_return_immediate_s2"><span class="id" title="lemma">try_return_immediate_s2</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">Q</span>,<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/> <br/> </div> <div class="doc"> Similarly, next we model a try statement which actually throws something. In System C, this can be expressed using the following fragment:<pre><code class="language-effekt">
def example2() {
  try {
    cap.doSomething()
  } with cap : S0 {
    def doSomething() {
      0
    }
  }
}
</code></pre></div> <div class="code"> <span class="id" title="keyword">Definition</span> <a name="try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a> :=<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/> <span class="id" title="keyword">Definition</span> <a name="try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> :=<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/> <span class="id" title="keyword">Definition</span> <a name="try_return_throw"><span class="id" title="definition">try_return_throw</span></a> :=<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#stm_try"><span class="id" title="constructor">stm_try</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_bvar"><span class="id" title="constructor">blk_bvar</span></a> 0) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>).<br/> <br/> </div> <div class="doc"> Naturally, it still returns an Int/<span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a></span> though. </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_return_throw_typing"><span class="id" title="lemma">try_return_throw_typing</span></a> : <a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">stm</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw"><span class="id" title="definition">try_return_throw</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a>.<br/> <br/> </div> <div class="doc"> The reduction steps for this expression are a bit more complicated. First, a throw statement is reduced in the presence of a matching handler, which shifts evaluation to that handler and unwinds from there. </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_return_throw_s1"><span class="id" title="lemma">try_return_throw_s1</span></a> :<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw"><span class="id" title="definition">try_return_throw</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/> <br/> <span class="id" title="keyword">Lemma</span> <a name="try_return_throw_s2"><span class="id" title="lemma">try_return_throw_s2</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">Q</span>,<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a>.<br/> <br/> <span class="id" title="keyword">Lemma</span> <a name="try_return_throw_s3"><span class="id" title="lemma">try_return_throw_s3</span></a> :<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_param_typ"><span class="id" title="definition">try_return_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_return_throw_typ"><span class="id" title="definition">try_return_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a> .<br/> <br/> </div> <div class="doc"> This example is a little more complicated. Here, we throw while evaluating a value-binder under the handler block.<pre><code class="language-effekt">
def example3() {
  try {
    val x = cap.doSomething();
    0
  } with cap : S0 {
    def doSomething() {
      0
    }
  }
}
</code></pre></div> <div class="code"> <span class="id" title="keyword">Definition</span> <a name="try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> := <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/> <span class="id" title="keyword">Definition</span> <a name="try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a> := <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>.<br/> <span class="id" title="keyword">Definition</span> <a name="try_apply_throw"><span class="id" title="definition">try_apply_throw</span></a> :=<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#stm_try"><span class="id" title="constructor">stm_try</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a> <br/> &nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_val"><span class="id" title="constructor">stm_val</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_bvar"><span class="id" title="constructor">blk_bvar</span></a> 0) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0)))<br/> &nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)).<br/> <br/> </div> <div class="doc"> Naturally, it returns an Int/<span class="inlinecode"><a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a></span> again. </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_typing"><span class="id" title="lemma">try_apply_throw_typing</span></a> :<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">stm</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw"><span class="id" title="definition">try_apply_throw</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a>.<br/> <br/> </div> <div class="doc"> The reduction steps for this statement are a little more complicated. First, as before, we shift the try statement onto the stack as a handler frame. </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s1"><span class="id" title="lemma">try_apply_throw_s1</span></a> :<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw"><span class="id" title="definition">try_apply_throw</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_val"><span class="id" title="constructor">stm_val</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/> &nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/> <br/> </div> <div class="doc"> Next, we mark that we are evaluating a binding with a K frame. </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s2"><span class="id" title="lemma">try_apply_throw_s2</span></a> :<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_val"><span class="id" title="constructor">stm_val</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">((</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/> <br/> </div> <div class="doc"> We throw in the presence of a K frame and a matching H (handler) frame, which causes the K frame to be unwound... </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s3"><span class="id" title="lemma">try_apply_throw_s3</span></a> :<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_handler"><span class="id" title="constructor">blk_handler</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a>) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">((</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">((</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a>.<br/> <br/> </div> <div class="doc"> ... </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s4"><span class="id" title="lemma">try_apply_throw_s4</span></a> :<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">((</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a>.<br/> <br/> </div> <div class="doc"> ... and the matching H frame to be shifted off the frame to be evaluated. </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="try_apply_throw_s5"><span class="id" title="lemma">try_apply_throw_s5</span></a> :<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〈</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">throw</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">#</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#H"><span class="id" title="constructor">H</span></a> <a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">•</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#K"><span class="id" title="constructor">K</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0))<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#451cabffa5606fdf421b1d78bf6b4957"><span class="id" title="notation">〉</span></a><a class="idref" href="Top.SystemC.Definitions.html#e92f2993feae095c395ce5261340adfe"><span class="id" title="notation">--&gt;</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〈</span></a> <a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a><a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">)</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.SystemC.Definitions.html#top"><span class="id" title="abbreviation">top</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">|</span></a> <a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#l1"><span class="id" title="axiom">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_sig"><span class="id" title="constructor">bind_sig</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_param_typ"><span class="id" title="definition">try_apply_throw_param_typ</span></a> <a class="idref" href="Top.SystemC.Examples.html#try_apply_throw_typ"><span class="id" title="definition">try_apply_throw_typ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#8b2651044cf89693157aa065ea56f2b9"><span class="id" title="notation">〉</span></a>.<br/> <br/> </div> <div class="doc"> Here is a more complicated example:<pre><code class="language-effekt">
def example4() {
  try {
    interface S1 {
      def doSomethingElse(): Unit => Int at {cap}
    }

    val thunk = 
      try {
        def f() {
          cap.doSomething()
        }
        f
      } with cap2 : S1 {
        def doSomethingElse() {
          def g() {
            0
          }
          box {cap} g
        }
      };
    thunk()
  } with cap : S0 {
    def doSomething() {
      0
    }
  }
}
</code></pre></div> <div class="code"> <span class="id" title="keyword">Definition</span> <a name="cap_return_tm"><span class="id" title="definition">cap_return_tm</span></a> :=<br/> &nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_try"><span class="id" title="constructor">stm_try</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_val"><span class="id" title="constructor">stm_val</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#typ_capt"><span class="id" title="constructor">typ_capt</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#typ_vfun"><span class="id" title="constructor">typ_vfun</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>) (<a class="idref" href="Top.SystemC.CaptureSets.html#cset_bvar"><span class="id" title="definition">cset_bvar</span></a> 0))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_try"><span class="id" title="constructor">stm_try</span></a> (<a class="idref" href="Top.SystemC.CaptureSets.html#cset_bvar"><span class="id" title="definition">cset_bvar</span></a> 0) <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_def"><span class="id" title="constructor">stm_def</span></a> (<a class="idref" href="Top.SystemC.CaptureSets.html#cset_bvar"><span class="id" title="definition">cset_bvar</span></a> 1) (<a class="idref" href="Top.SystemC.Definitions.html#typ_vfun"><span class="id" title="constructor">typ_vfun</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a>)<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#blk_vabs"><span class="id" title="constructor">blk_vabs</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_throw"><span class="id" title="constructor">stm_throw</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_bvar"><span class="id" title="constructor">blk_bvar</span></a> 1) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_box"><span class="id" title="constructor">exp_box</span></a> (<a class="idref" href="Top.SystemC.CaptureSets.html#cset_bvar"><span class="id" title="definition">cset_bvar</span></a> 2)<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#blk_bvar"><span class="id" title="constructor">blk_bvar</span></a> 0))))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_box"><span class="id" title="constructor">exp_box</span></a> (<a class="idref" href="Top.SystemC.CaptureSets.html#cset_bvar"><span class="id" title="definition">cset_bvar</span></a> 1)<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#blk_vabs"><span class="id" title="constructor">blk_vabs</span></a> <a class="idref" href="Top.SystemC.Definitions.html#typ_base"><span class="id" title="constructor">typ_base</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>)))))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_vapp"><span class="id" title="constructor">stm_vapp</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_unbox"><span class="id" title="constructor">blk_unbox</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_bvar"><span class="id" title="constructor">exp_bvar</span></a> 0)) <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_ret"><span class="id" title="constructor">stm_ret</span></a> <a class="idref" href="Top.SystemC.Definitions.html#exp_const"><span class="id" title="constructor">exp_const</span></a>))<br/> .<br/> </div> <div class="doc"> Naturally, it is also well-typed. </div> <div class="code"> <span class="id" title="keyword">Lemma</span> <a name="cap_return_typing0"><span class="id" title="lemma">cap_return_typing0</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <span class="id" title="var">T</span><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/> &nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#styping"><span class="id" title="inductive">styping</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">{}</span></a><a class="idref" href="Top.SystemC.CaptureSets.html#c345676e3b4c0f0924b673b43219aba7"><span class="id" title="notation">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Examples.html#cap_return_tm"><span class="id" title="definition">cap_return_tm</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Examples.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a>.<br/> <br/> </div> <div class="doc"> Definitions can be desugared at some cost into block applications and boxes. Note that we insert an <tt>unbox</tt> to work around System C's automatic box inferencing.<pre><code class="language-effekt">
def example5Def {c : S0} {
  def C() {
    c.doSomething();
    0
  }
  // body here...
  0
}

def example5DefSugar {c : S0} {
  (unbox {(C : () => Int at {c}) => 
    // body here
    0})
  (box {() => c.doSomething(); 0})
}
</code></pre></div> <div class="code"> <br/> <span class="id" title="keyword">Definition</span> <a name="sugar_def"><span class="id" title="definition">sugar_def</span></a> (<span class="id" title="var">C</span> : <a class="idref" href="Top.SystemC.CaptureSets.html#cap"><span class="id" title="inductive">cap</span></a>) (<span class="id" title="var">S1</span> : <a class="idref" href="Top.SystemC.Definitions.html#btyp"><span class="id" title="inductive">btyp</span></a>) (<span class="id" title="var">b</span> : <a class="idref" href="Top.SystemC.Definitions.html#blk"><span class="id" title="inductive">blk</span></a>) (<span class="id" title="var">s</span> : <a class="idref" href="Top.SystemC.Definitions.html#stm"><span class="id" title="inductive">stm</span></a>) : <a class="idref" href="Top.SystemC.Definitions.html#stm"><span class="id" title="inductive">stm</span></a> :=<br/> &nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#stm_vapp"><span class="id" title="constructor">stm_vapp</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#blk_vabs"><span class="id" title="constructor">blk_vabs</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#typ_capt"><span class="id" title="constructor">typ_capt</span></a> <a class="idref" href="Top.SystemC.Examples.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Top.SystemC.Examples.html#C"><span class="id" title="variable">C</span></a>) <a class="idref" href="Top.SystemC.Examples.html#s"><span class="id" title="variable">s</span></a>) (<a class="idref" href="Top.SystemC.Definitions.html#exp_box"><span class="id" title="constructor">exp_box</span></a> <a class="idref" href="Top.SystemC.Examples.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="Top.SystemC.Examples.html#b"><span class="id" title="variable">b</span></a>)).<br/> <br/> <span class="id" title="keyword">Definition</span> <a name="sugar_var"><span class="id" title="definition">sugar_var</span></a> (<span class="id" title="var">x</span> : <a class="idref" href="Top.Util.Atom.html#AtomImpl.atom"><span class="id" title="axiom">atom</span></a>) : <a class="idref" href="Top.SystemC.Definitions.html#blk"><span class="id" title="inductive">blk</span></a> :=<br/> &nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Top.SystemC.Definitions.html#blk_unbox"><span class="id" title="constructor">blk_unbox</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#exp_fvar"><span class="id" title="constructor">exp_fvar</span></a> <a class="idref" href="Top.SystemC.Examples.html#x"><span class="id" title="variable">x</span></a>)).<br/> <br/> <span class="id" title="keyword">Lemma</span> <a name="sugar_def_typing"><span class="id" title="lemma">sugar_def_typing</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">L</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">b</span> <span class="id" title="var">s</span> (<span class="id" title="var">C</span> : <a class="idref" href="Top.SystemC.CaptureSets.html#cap"><span class="id" title="inductive">cap</span></a>) <span class="id" title="var">Q</span> <span class="id" title="var">S1</span> <span class="id" title="var">T2</span>,<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Examples.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="Top.SystemC.Definitions.html#11f615684d43d5ff020d0ffb9a3d8457"><span class="id" title="notation">|=</span></a> <a class="idref" href="Top.SystemC.Examples.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#wf_cap"><span class="id" title="inductive">wf_cap</span></a> <a class="idref" href="Top.SystemC.Examples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Top.SystemC.Examples.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#wf_cap"><span class="id" title="inductive">wf_cap</span></a> <a class="idref" href="Top.SystemC.Examples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Top.SystemC.Examples.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Examples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.Examples.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">;</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">blk</span></a> <a class="idref" href="Top.SystemC.Examples.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <a class="idref" href="Top.Util.Atom.html#AtomImpl.atom"><span class="id" title="axiom">atom</span></a>, <a class="idref" href="Top.SystemC.Examples.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Top.Util.Metatheory.html#afed8734a485685888dccb4f977f99dd"><span class="id" title="notation">`</span></a><a class="idref" href="Top.Util.Metatheory.html#afed8734a485685888dccb4f977f99dd"><span class="id" title="notation">notin</span></a><a class="idref" href="Top.Util.Metatheory.html#afed8734a485685888dccb4f977f99dd"><span class="id" title="notation">`</span></a> <a class="idref" href="Top.SystemC.Examples.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">(</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Top.SystemC.Definitions.html#bind_val"><span class="id" title="constructor">bind_val</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#typ_capt"><span class="id" title="constructor">typ_capt</span></a> <a class="idref" href="Top.SystemC.Examples.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Top.SystemC.Examples.html#C"><span class="id" title="variable">C</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Top.Util.Environment.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Top.SystemC.Examples.html#E"><span class="id" title="variable">E</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.Examples.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">;</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">stm</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Definitions.html#open_es"><span class="id" title="definition">open_es</span></a> <a class="idref" href="Top.SystemC.Examples.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Top.SystemC.Examples.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#T2"><span class="id" title="variable">T2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Examples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.Examples.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">;</span></a> <a class="idref" href="Top.SystemC.Examples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">stm</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#sugar_def"><span class="id" title="definition">sugar_def</span></a> <a class="idref" href="Top.SystemC.Examples.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="Top.SystemC.Examples.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Top.SystemC.Examples.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Top.SystemC.Examples.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#9cede441202180a620a73f1df5e6bca6"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#T2"><span class="id" title="variable">T2</span></a>.<br/> <br/> <span class="id" title="keyword">Lemma</span> <a name="sugar_var_typing"><span class="id" title="lemma">sugar_var_typing</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">f</span> <span class="id" title="var">S1</span> <span class="id" title="var">C</span>,<br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Top.SystemC.Examples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Definitions.html#wf_cap"><span class="id" title="inductive">wf_cap</span></a> <a class="idref" href="Top.SystemC.Examples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Top.SystemC.Examples.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Examples.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="Top.SystemC.Definitions.html#11f615684d43d5ff020d0ffb9a3d8457"><span class="id" title="notation">|=</span></a> <a class="idref" href="Top.SystemC.Examples.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.Util.Environment.html#binds"><span class="id" title="definition">binds</span></a> <a class="idref" href="Top.SystemC.Examples.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#bind_val"><span class="id" title="constructor">bind_val</span></a> (<a class="idref" href="Top.SystemC.Definitions.html#typ_capt"><span class="id" title="constructor">typ_capt</span></a> <a class="idref" href="Top.SystemC.Examples.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Top.SystemC.Examples.html#C"><span class="id" title="variable">C</span></a>)) <a class="idref" href="Top.SystemC.Examples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/> &nbsp;&nbsp;<a class="idref" href="Top.SystemC.Examples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">@</span></a> <a class="idref" href="Top.SystemC.Examples.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">|-</span></a><a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">blk</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">(</span></a><a class="idref" href="Top.SystemC.Examples.html#sugar_var"><span class="id" title="definition">sugar_var</span></a> <a class="idref" href="Top.SystemC.Examples.html#f"><span class="id" title="variable">f</span></a><a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">)</span></a> <a class="idref" href="Top.SystemC.Definitions.html#b0e42b705cf240294735f1d77c92cb6a"><span class="id" title="notation">~:</span></a> <a class="idref" href="Top.SystemC.Examples.html#S1"><span class="id" title="variable">S1</span></a>.<br/> <span class="comment">(*<br/> <span class="comment">(**&nbsp;Finally<br/> def&nbsp;handleTick(prog&nbsp;:&nbsp;{()&nbsp;=&gt;&nbsp;Int}&nbsp;=&gt;&nbsp;Int)&nbsp;=&gt;&nbsp;Int&nbsp;=<br/> &nbsp;&nbsp;val&nbsp;stateFun&nbsp;=&nbsp;try&nbsp;{&nbsp;tick&nbsp;=&gt;<br/> &nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;res&nbsp;=&nbsp;prog&nbsp;(tick)&nbsp;in<br/> &nbsp;&nbsp;&nbsp;&nbsp;box&nbsp;{&nbsp;prog&nbsp;}&nbsp;(&nbsp;(s&nbsp;:&nbsp;Int)&nbsp;=&gt;&nbsp;res&nbsp;)<br/> &nbsp;&nbsp;}&nbsp;with&nbsp;{<br/> &nbsp;&nbsp;&nbsp;&nbsp;box&nbsp;{&nbsp;prog&nbsp;}&nbsp;(&nbsp;(s&nbsp;:&nbsp;Int)&nbsp;=&gt;&nbsp;(unbox&nbsp;resume(s))(s&nbsp;+&nbsp;1)<br/> &nbsp;&nbsp;}&nbsp;in<br/> &nbsp;&nbsp;(unbox&nbsp;stateFun)(0)<br/> *)</span><br/> Definition&nbsp;handle_tick_term&nbsp;:=<br/> &nbsp;&nbsp;blk_babs&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base)<br/> &nbsp;&nbsp;&nbsp;&nbsp;(stm_val&nbsp;<span class="comment">(*&nbsp;statefun&nbsp;*)</span><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(typ_capt&nbsp;(typ_vfun&nbsp;typ_base&nbsp;typ_base)&nbsp;(cset_bvar&nbsp;0))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_try&nbsp;(cset_bvar&nbsp;0)&nbsp;typ_base&nbsp;typ_base<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(**&nbsp;body&nbsp;|&nbsp;tick&nbsp;*)</span><br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_val&nbsp;typ_base&nbsp;(stm_bapp&nbsp;(blk_bvar&nbsp;1)&nbsp;(cset_bvar&nbsp;0)&nbsp;(blk_bvar&nbsp;0))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_ret&nbsp;(exp_box&nbsp;(cset_bvar&nbsp;1)&nbsp;(blk_vabs&nbsp;typ_base&nbsp;(stm_ret&nbsp;(exp_bvar&nbsp;1))))))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_val<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(typ_capt&nbsp;(typ_vfun&nbsp;typ_base&nbsp;typ_base)&nbsp;(cset_bvar&nbsp;1))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_vapp&nbsp;(blk_bvar&nbsp;0)&nbsp;(exp_bvar&nbsp;0))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_ret<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(exp_box&nbsp;(cset_bvar&nbsp;1)<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(blk_vabs&nbsp;typ_base&nbsp;(stm_vapp&nbsp;(blk_unbox&nbsp;(exp_bvar&nbsp;1))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(exp_bvar&nbsp;0)))))))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stm_vapp&nbsp;(blk_unbox&nbsp;(exp_bvar&nbsp;0))&nbsp;exp_const)).<br/> Lemma&nbsp;handle_tick_term_typing&nbsp;:<br/> &nbsp;&nbsp;exists&nbsp;T,&nbsp;empty&nbsp;@&nbsp;{}C&nbsp;;&nbsp;nil&nbsp;|-blk&nbsp;handle_tick_term&nbsp;~:&nbsp;T.<br/> Proof&nbsp;with&nbsp;notin_simpl;&nbsp;crush;&nbsp;try&nbsp;fsetdec;&nbsp;try&nbsp;fnsetdec;&nbsp;try&nbsp;lsetdec.<br/> &nbsp;&nbsp;eexists.<br/> &nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;instantiate&nbsp;(2&nbsp;:=&nbsp;{}).<br/> &nbsp;&nbsp;intros&nbsp;prog&nbsp;progFresh.<br/> &nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;{<br/> &nbsp;&nbsp;&nbsp;&nbsp;crush.<br/> &nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_subset_prop</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;split;&nbsp;try&nbsp;fnsetdec;&nbsp;try&nbsp;lsetdec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_subset_prop</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;((NatSet.F.union&nbsp;{}N&nbsp;(NatSet.F.remove&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;({}N)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(x)&nbsp;with&nbsp;(prog).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;binds.&nbsp;simpl.&nbsp;destruct&nbsp;(prog&nbsp;==&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crush.<br/> &nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_subset_prop</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;((NatSet.F.union&nbsp;{}N&nbsp;(NatSet.F.remove&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;({}N)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intros&nbsp;tick.&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;prog).&nbsp;intros&nbsp;tickFr.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crush.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;tick)<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(open_cset&nbsp;1&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0)))&nbsp;with&nbsp;(cset_fvar&nbsp;tick).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cvt_rec&nbsp;0&nbsp;(cset_fvar&nbsp;tick)&nbsp;typ_base)&nbsp;with<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(open_cvt&nbsp;typ_base&nbsp;(cset_fvar&nbsp;tick)).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;typing_bapp&nbsp;with&nbsp;(S1&nbsp;:=&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base))...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;econstructor.&nbsp;intros&nbsp;t&nbsp;tisTick.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;t&nbsp;with&nbsp;tick.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fsetdec.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.remove&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;({}N)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;progOrTick&nbsp;progOrTickCond.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;AtomSetFacts.union_iff&nbsp;in&nbsp;*.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;progOrTickCond...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;replace&nbsp;progOrTick&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;replace&nbsp;progOrTick&nbsp;with&nbsp;tick...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec;&nbsp;notin_solve.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.&nbsp;unfold&nbsp;cset_subset_prop;&nbsp;repeat&nbsp;split...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;intros&nbsp;t&nbsp;tIsTick.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;t&nbsp;with&nbsp;tick...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eexists.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;crush.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;false...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0);&nbsp;try&nbsp;nnotin_solve.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry.&nbsp;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.not_mem_iff...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_cvt_rec</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;s.&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;tick&nbsp;`union`&nbsp;singleton&nbsp;prog).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;sFr.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(1&nbsp;===&nbsp;1)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;tick)<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(open_cset&nbsp;1&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;1)))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg.&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;s&nbsp;`union`&nbsp;singleton&nbsp;tick&nbsp;`union`&nbsp;singleton&nbsp;prog).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;unused&nbsp;unusedFr.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg.&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;1))&nbsp;with&nbsp;true...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(NatSet.F.union&nbsp;{}N&nbsp;(NatSet.F.remove&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;1))))&nbsp;with&nbsp;false...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry;&nbsp;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.not_mem_iff...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry;&nbsp;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cset_union&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;(cset_fvar&nbsp;tick))<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;(cset_set&nbsp;(singleton&nbsp;tick&nbsp;`union`&nbsp;singleton&nbsp;prog)&nbsp;{}N&nbsp;{}L)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;progOrTick&nbsp;progOrTickCond.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;AtomSetFacts.union_iff&nbsp;in&nbsp;*.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;progOrTickCond...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;replace&nbsp;progOrTick&nbsp;with&nbsp;tick...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...&nbsp;}<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;replace&nbsp;progOrTick&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...&nbsp;}<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_remove_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intros&nbsp;unused&nbsp;unusedFr&nbsp;resume&nbsp;resumeFr.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_bs</span></span> <span class="inlinecode"><span class="id" title="var">open_bs_rec</span></span> <span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(0&nbsp;===&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;typing_bvar_capture...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;1&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;1))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;1))&nbsp;with&nbsp;true...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry.&nbsp;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff.&nbsp;fnsetdec.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_set_mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;resume&nbsp;`union`&nbsp;singleton&nbsp;prog&nbsp;`union`&nbsp;singleton&nbsp;unused).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;s&nbsp;sFr.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">open_es</span></span> <span class="inlinecode"><span class="id" title="var">open_es_rec</span></span>.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(1&nbsp;===&nbsp;0);&nbsp;try&nbsp;nnotin_solve...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(open_cset&nbsp;1&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;1))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;singleton&nbsp;s&nbsp;`union`&nbsp;singleton&nbsp;resume&nbsp;`union`&nbsp;singleton&nbsp;prog&nbsp;`union`&nbsp;singleton&nbsp;unused).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;unboxResume&nbsp;unboxResumeFr.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;(cset_fvar&nbsp;prog)).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;cset_subset_prop;&nbsp;repeat&nbsp;split...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(0&nbsp;===&nbsp;0)...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;1&nbsp;(NatSet.F.singleton&nbsp;1))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;&nbsp;&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base).<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/> &nbsp;&nbsp;}<br/> &nbsp;&nbsp;instantiate&nbsp;(2&nbsp;:=&nbsp;singleton&nbsp;prog).<br/> &nbsp;&nbsp;intros&nbsp;stateFun&nbsp;stateFunFr.<br/> &nbsp;&nbsp;econstructor.<br/> &nbsp;&nbsp;destruct&nbsp;(0&nbsp;===&nbsp;0)...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;instantiate&nbsp;(2&nbsp;:=&nbsp;typ_base).<br/> &nbsp;&nbsp;instantiate&nbsp;(1&nbsp;:=&nbsp;typ_base).<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;replace&nbsp;&nbsp;&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog).<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/> &nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;binds_dec.<br/> &nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/> &nbsp;&nbsp;replace&nbsp;&nbsp;&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/> &nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/> &nbsp;&nbsp;autorewrite&nbsp;with&nbsp;csets.<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;exists&nbsp;&nbsp;(typ_bfun&nbsp;(typ_exc&nbsp;typ_base&nbsp;typ_base)&nbsp;typ_base)...<br/> &nbsp;&nbsp;binds_dec...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;replace&nbsp;&nbsp;&nbsp;(open_cset&nbsp;0&nbsp;(cset_fvar&nbsp;prog)&nbsp;(cset_bvar&nbsp;0))&nbsp;with&nbsp;(cset_fvar&nbsp;prog)...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;intros&nbsp;p&nbsp;pIsProg;&nbsp;replace&nbsp;p&nbsp;with&nbsp;prog...<br/> &nbsp;&nbsp;cbv&nbsp;<span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_fvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_bvars</span></span> <span class="inlinecode"><span class="id" title="var">open_cset</span></span> <span class="inlinecode"><span class="id" title="var">cset_union</span></span> <span class="inlinecode"><span class="id" title="var">cset_references_bvar_dec</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvar</span></span> <span class="inlinecode"><span class="id" title="var">cset_lvars</span></span>...<br/> &nbsp;&nbsp;replace&nbsp;(NatSet.F.mem&nbsp;0&nbsp;(NatSet.F.singleton&nbsp;0))&nbsp;with&nbsp;true;&nbsp;f_equal...<br/> &nbsp;&nbsp;symmetry&nbsp;;rewrite&nbsp;&lt;-&nbsp;NatSetFacts.mem_iff...<br/> &nbsp;&nbsp;econstructor...<br/> &nbsp;&nbsp;Unshelve.<br/> &nbsp;&nbsp;all:&nbsp;repeat&nbsp;exact&nbsp;{}.<br/> Qed.<br/> *)</span></div> </article> <div id="toggle-proofs"></div> <script type="text/javascript" src="config.js"></script> <script type="text/javascript" src="coqdocjs.js"></script> </div> </div> </div> <script src="/oopsla-2022-artifact/highlight/highlight.pack.js"></script> <script src="/oopsla-2022-artifact/dist/app.bundle.js"></script> </body> </html>
